<!--
SPDX-FileCopyrightText: Aravis Project Team

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Aravis &ndash; 0.10: Porting to Aravis 0.8</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  
  <meta property="og:image:width" content="256"/>
  <meta property="og:image:height" content="256"/>
  <meta property="og:image:secure_url" content="aravis.svg"/>
  <meta property="og:image:alt" content="Aravis-0.10"/>
  

  
  <meta property="og:title" content="Aravis: Porting to Aravis 0.8"/>
  <meta property="og:description" content="Reference for Aravis-0.10: Porting to Aravis 0.8"/>
  <meta name="twitter:title" content="Aravis: Porting to Aravis 0.8"/>
  <meta name="twitter:description" content="Reference for Aravis-0.10: Porting to Aravis 0.8"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  <link rel="search" type="application/opensearchdescription+xml" title="Aravis" href="opensearch.xml">
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      <div class="section">
        <img src="aravis.svg" class="logo"/>
      </div>
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Aravis</a></h3>
        <p>API Version: 0.10</p>
        
        <p>Library Version: 0.9.0</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2023.4</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Porting to Aravis 0.8
    <a href="#title" class="anchor"></a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <h3 id="porting-to-aravis-08">Porting to Aravis 0.8<a class="md-anchor" href="#porting-to-aravis-08" title="Permanent link"></a></h3>
<p>Aravis 0.8 has seen a major rewrite of how communication errors are handled.
Instead of relying on a status <span class="caps">API</span>, each function that can fail has an
additional error parameter now. This is the standard way of handling error in
the glib ecosytem. The nice side effect is now errors throw exceptions in
bindings where the language support them (rust, python,&nbsp;javascript).</p>
<p>A quick port from the older series to 0.8 series is just a matter of adding a
<span class="caps">NULL</span> parameter to most of the modified functions. But you are advised to take
this opportunity to correctly handle&nbsp;errors.</p>
<p>There is a page explaining Glib errors and how to manage them in the <a href="https://docs.gtk.org/glib/error-reporting.html">Glib
documentation</a>.</p>
<p>During the camera configuration, in C language it can be somehow cumbersome to
check for errors at each function call. A convenient way to deal with this issue
is the following&nbsp;construction:</p>
<div class="codehilite"><pre><span></span><code><span class="n">GError</span><span class="w"> </span><span class="o">**</span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="n">arv_camera_</span><span class="p">...</span><span class="w"> </span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="n">arv_camera_</span><span class="p">...</span><span class="w"> </span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="n">arv_camera_</span><span class="p">...</span><span class="w"> </span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="n">arv_camera_</span><span class="p">...</span><span class="w"> </span><span class="p">(...,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span><span class="w"></span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">handle</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">here</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">g_clear_error</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">error</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>